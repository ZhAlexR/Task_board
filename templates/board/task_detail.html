{% extends 'base.html' %}

{% block content %}
  <div class="card">
    <div class="card-header">
      <h3>{{ task.name }}</h3>
    </div>
    <div class="card-body">
      <h5 class="card-title">Description:</h5>
      <p class="card-text">{{ task.description }}</p>
      <h5 class="card-title">Deadline:</h5>
      <p class="card-text">{{ task.deadline }}</p>
      <h5 class="card-title">Priority:</h5>
      <p class="card-text">{{ task.priority }}</p>
      <h5 class="card-title">Type:</h5>
      <p class="card-text">{{ task.task_type }}</p>
      <h5 class="card-title">Assigned To:</h5>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
          </tr>
        </thead>
        <tbody>
          {% for worker in task.assignees.all %}
            <tr>
              <td>{{ worker.username }}</td>
              <td>{{ worker.email }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <a href="{% url "board:task-update" pk=task.pk %}" class="btn btn-primary">Update</a>
      <a href="{% url "board:task-delete" pk=task.pk %}" class="btn btn-danger">Delete</a>

        <form method="post" action="{% url "board:task-toggle-assign" pk=task.pk %}" style="display: inline-block;">
          {% csrf_token %}
          {% if user not in task.assignees.all %}
            <button type="submit" class="btn btn-success">Assign Me</button>
          {%  else  %}
             <button type="submit" class="btn btn-danger">Delete Me</button>
          {% endif %}
        </form>
    </div>
  </div>
{% endblock %}
